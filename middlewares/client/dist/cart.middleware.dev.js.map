{"version":3,"sources":["cart.middleware.js"],"names":["Cart","require","module","exports","cart","req","res","next","cookies","cartId","save","cookie","id","findOne","_id","locals","miniCart"],"mappings":";;AAAA,IAAMA,IAAI,GAAGC,OAAO,CAAC,yBAAD,CAApB;;AAEAC,MAAM,CAACC,OAAP,CAAeC,IAAf,GAAsB,iBAAOC,GAAP,EAAYC,GAAZ,EAAiBC,IAAjB;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,cAChBF,GAAG,CAACG,OAAJ,CAAYC,MADI;AAAA;AAAA;AAAA;;AAEZL,UAAAA,IAFY,GAEL,IAAIJ,IAAJ,EAFK;AAAA;AAAA,0CAGZI,IAAI,CAACM,IAAL,EAHY;;AAAA;AAKlBJ,UAAAA,GAAG,CAACK,MAAJ,CAAW,QAAX,EAAqBP,IAAI,CAACQ,EAA1B;AALkB;AAAA;;AAAA;AAAA;AAAA,0CAOCZ,IAAI,CAACa,OAAL,CAAa;AAC9BC,YAAAA,GAAG,EAAET,GAAG,CAACG,OAAJ,CAAYC;AADa,WAAb,CAPD;;AAAA;AAOZL,UAAAA,KAPY;AAWlBE,UAAAA,GAAG,CAACS,MAAJ,CAAWC,QAAX,GAAsBZ,KAAtB;;AAXkB;AAapBG,UAAAA,IAAI;;AAbgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,CAAtB","sourcesContent":["const Cart = require(\"../../models/cart.model\");\r\n\r\nmodule.exports.cart = async (req, res, next) => {\r\n  if(!req.cookies.cartId) {\r\n    const cart = new Cart();\r\n    await cart.save();\r\n\r\n    res.cookie(\"cartId\", cart.id);\r\n  } else {\r\n    const cart = await Cart.findOne({\r\n      _id: req.cookies.cartId\r\n    });\r\n    \r\n    res.locals.miniCart = cart;\r\n  }\r\n  next();\r\n}"],"file":"cart.middleware.dev.js"}