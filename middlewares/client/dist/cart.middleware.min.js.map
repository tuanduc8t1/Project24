{"version":3,"sources":["cart.middleware.js"],"names":["Cart","require","module","req","res","next","cart","_cart","regeneratorRuntime","async","_context","prev","cookies","cartId","exports","awrap","save","cookie","id","findOne","_id","sent","locals","miniCart","stop"],"mappings":"aAAA,IAAMA,KAAOC,QAAQ,2BAArBC,OAAMF,QAAOC,KAAQ,SAAAE,EAAAC,EAAAC,GAAA,IAAAC,EAAAC,EAAA,OAAAC,mBAAAC,MAAA,SAAAC,GAAA,OAAA,OAAAA,EAAAC,KAAAD,EAAAL,MAAA,KAAA,EAAA,GAGfF,EAAIS,QAAQC,OAHG,CAAAH,EAAAL,KAAA,EAAA,MAAA,OAEdS,EAAQR,IAAfN,KAFqBU,EAAAL,KAAA,EAAAG,mBAAAO,MAECT,EAAAU,QAFD,KAAA,EAECZ,EAAAa,OAAA,SAAAX,EAAAY,IAFDR,EAAAL,KAAA,GAAA,MAAA,KAAA,EAAA,OAAAK,EAAAL,KAAA,EAAAG,mBAAAO,MAECf,KAAAmB,QAAA,CAAAC,IAAAjB,EAAAS,QAAAC,UAFD,KAAA,EAECP,EAFDI,EAAAW,KAECjB,EAAAkB,OAAAC,SAAAjB,EAFD,KAAA,GAenBD,IAfmB,KAAA,GAAA,IAAA,MAAA,OAAAK,EAAAc","file":"cart.middleware.min.js","sourcesContent":["const Cart = require(\"../../models/cart.model\");\r\n\r\nmodule.exports.cart = async (req, res, next) => {\r\n  if(!req.cookies.cartId) {\r\n    const cart = new Cart();\r\n    await cart.save();\r\n\r\n    res.cookie(\"cartId\", cart.id);\r\n  } else {\r\n    const cart = await Cart.findOne({\r\n      _id: req.cookies.cartId\r\n    });\r\n    \r\n    res.locals.miniCart = cart;\r\n  }\r\n  next();\r\n}"]}